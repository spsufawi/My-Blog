---
title: Advanced R Exercise Solution (1)
author: Xinchen Pan
date: '2018-05-18'
slug: advanced-r-exercise-solution
categories:
  - R
tags:
  - R
---



<p>I am reading the <a href="http://adv-r.had.co.nz/">advanced R</a> written by Hadley Wickham recently. I want also do the exercise this time. Not sure if I can finish all of them. Letâ€™s see.</p>
<div id="data-structures" class="section level2">
<h2>Data Structures</h2>
<ol style="list-style-type: decimal">
<li>What attributes does a data frame possess?</li>
</ol>
<p>We can use <code>attributes()</code> to find out the attributes of data frame.</p>
<pre class="r"><code>names(attributes(data.frame(x = 1:3, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))))</code></pre>
<pre><code>## [1] &quot;names&quot;     &quot;class&quot;     &quot;row.names&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>What does <code>as.matrix()</code> do when applied to a data frame with columns of different types?</li>
</ol>
<p>The numeric values will be coerced to characters.</p>
<pre class="r"><code>str(as.matrix(data.frame(x = 1:3, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))))</code></pre>
<pre><code>##  chr [1:3, 1:2] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;a&quot; &quot;b&quot; &quot;c&quot;
##  - attr(*, &quot;dimnames&quot;)=List of 2
##   ..$ : NULL
##   ..$ : chr [1:2] &quot;x&quot; &quot;y&quot;</code></pre>
<p>If the data frame contain both logical values and numeric value, the logical values will be coerced to numeric values.</p>
<pre class="r"><code>as.matrix(data.frame(x = c(T, T, F), y = c(1, 2, 3)))</code></pre>
<pre><code>##      x y
## [1,] 1 1
## [2,] 1 2
## [3,] 0 3</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Can you have a data frame with 0 rows? What about 0 columns?</li>
</ol>
<p>Yes.</p>
<pre class="r"><code>data.frame(x = character(), y = numeric())</code></pre>
<pre><code>## [1] x y
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<div id="subsetting" class="section level2">
<h2>Subsetting</h2>
<ol style="list-style-type: decimal">
<li>How would you randomly permute the columns of a data frame? (This is an important technique in random forests.) Can you simultaneously permute the rows and columns in one step?</li>
</ol>
<pre class="r"><code>dt &lt;- data.frame(&quot;X1&quot; = c(rep(1, 5)), &quot;X2&quot; = c(rep(2, 5)), &quot;X3&quot; = c(rep(3, 5)))
dt</code></pre>
<pre><code>##   X1 X2 X3
## 1  1  2  3
## 2  1  2  3
## 3  1  2  3
## 4  1  2  3
## 5  1  2  3</code></pre>
<pre class="r"><code>dt[ ,sample(ncol(dt))]</code></pre>
<pre><code>##   X2 X1 X3
## 1  2  1  3
## 2  2  1  3
## 3  2  1  3
## 4  2  1  3
## 5  2  1  3</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>How would you select a random sample of m rows from a data frame? What if the sample had to be contiguous (i.e., with an initial row, a final row, and every row in between)?</li>
</ol>
<pre class="r"><code>dt &lt;- data.frame(&quot;X1&quot; = 1:10, &quot;X2&quot; = 1:10, &quot;X3&quot; = 1:10)
dt</code></pre>
<pre><code>##    X1 X2 X3
## 1   1  1  1
## 2   2  2  2
## 3   3  3  3
## 4   4  4  4
## 5   5  5  5
## 6   6  6  6
## 7   7  7  7
## 8   8  8  8
## 9   9  9  9
## 10 10 10 10</code></pre>
<pre class="r"><code>sample_contiguous &lt;- function(m){
  samples &lt;- sample(nrow(dt) - m + 1, 1)
  dt[samples :(samples + m - 1), ]
}

sample_contiguous(7)</code></pre>
<pre><code>##   X1 X2 X3
## 1  1  1  1
## 2  2  2  2
## 3  3  3  3
## 4  4  4  4
## 5  5  5  5
## 6  6  6  6
## 7  7  7  7</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>How could you put the columns in a data frame in alphabetical order?</li>
</ol>
<pre class="r"><code>dt &lt;- data.frame(&quot;dog&quot; = 1:5, &quot;cat&quot; = 1:5, &quot;apple&quot; = 1:5)
dt</code></pre>
<pre><code>##   dog cat apple
## 1   1   1     1
## 2   2   2     2
## 3   3   3     3
## 4   4   4     4
## 5   5   5     5</code></pre>
<pre class="r"><code>dt[, sort(names(dt))]</code></pre>
<pre><code>##   apple cat dog
## 1     1   1   1
## 2     2   2   2
## 3     3   3   3
## 4     4   4   4
## 5     5   5   5</code></pre>
<pre class="r"><code>##which is equivalent to 
dt[, order(names(dt))]</code></pre>
<pre><code>##   apple cat dog
## 1     1   1   1
## 2     2   2   2
## 3     3   3   3
## 4     4   4   4
## 5     5   5   5</code></pre>
</div>
